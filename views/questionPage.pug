html(lang='en')
  head
    meta(charset='utf-8')
    title QuestionPage
    script(src="/js/questionPage.js")
    style
      include ../public/css/home.css
      include ../public/css/questionPage.css
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/hopscotch.min.css")
    link(rel="stylesheet", href="https://cdn.quilljs.com/1.3.6/quill.snow.css")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js")
    script(src="https://cdn.quilljs.com/1.3.6/quill.js")
    script(src="https://cdn.quilljs.com/1.3.6/quill.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js")
  body
    include titleBar
    include menuBar
    div(class="container")
      if !questionDetails
        div not found
      else
        -const {title,body,tags,comments,answers,votes} = questionDetails
        -const {id,avatar,username} = ownerInfo
        div(class="container-h")
          div(class="question-title")
            div(class="question-title-h")=title
            div(class="question-title-b")
              div(class="avatar-div")
                img(class="author-avatar" src=`${avatar}`, alt="alt" onClick=`window.location.href='/viewProfile?id=${id.slice(1)}'`)
              div
                div(class="author")=username
                div(class="time") one minute ago
        div(class="question-body")
          div(class="question-body-c")!=body
            div(class="tags" style="margin-left:0")
              each tag in tags
                div(class="tag q-tag")=tag.title
          div(class="vote-container")
            div(class="up-arrow" onclick=`updateVote('/upVote/questions/${questionDetails.id}',this)`)
            div(class="countName votes")
              div(class="count")
                span=votes
                div(class="ansCount") votes
            div(class="down-arrow" onclick=`updateVote('/downVote/questions/${questionDetails.id}',this)`)
        div(class="comments") 
          if(comments.length > 0)
            span Comments 
          each comment in comments
            div(class="comment" id=`${comment.id}`)=comment.comment
            div(class="flex-row")
              div(class="c-btns")
                if(comment.ownerId == `u${userId}`)
                  div(class="edit-btn" onclick=`makeCommentEditable(this,'${comment.id}')`) edit
                  div(class="cancel-btn hide" onclick=`makeCommentUneditable(this,'${comment.id}')`) cancel
                  div(class="save-btn hide" onclick=`saveComment(this, '${comment.id}')`) save
              div(class="c-author")
                span(onclick=`window.location.href='/viewProfile?id=${comment.ownerId.slice(1)}'`)=comment.username
                span=`, ${comment.receivedAt}`
          include postComment
          +getId(questionDetails.id)
        include postAnswer
        include answer
